<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARIA Enhanced Testing Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .aria-widget {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .button {
            padding: 8px 16px;
            margin: 5px;
            border: 1px solid #007cba;
            background: #007cba;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .button:hover {
            background: #005a87;
        }
        
        .button[aria-pressed="true"] {
            background: #28a745;
        }
        
        .tab-panel {
            display: none;
            padding: 20px;
            border: 1px solid #ddd;
            border-top: none;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-bottom: none;
            background: #f5f5f5;
        }
        
        .tab[aria-selected="true"] {
            background: white;
            font-weight: bold;
        }
        
        .menu {
            list-style: none;
            margin: 0;
            padding: 0;
            border: 1px solid #ddd;
            background: white;
        }
        
        .menu-item {
            padding: 8px 16px;
            cursor: pointer;
        }
        
        .menu-item:hover,
        .menu-item[aria-selected="true"] {
            background: #007cba;
            color: white;
        }
        
        .alert {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .alert-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .progress-container {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 3px;
            margin: 10px 0;
        }
        
        .progress-bar {
            background: #007cba;
            height: 20px;
            border-radius: 8px;
            transition: width 0.3s ease;
        }
        
        .form-group {
            margin: 15px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .error {
            color: #d32f2f;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ARIA Landmarks Section -->
        <header role="banner">
            <h1>ARIA Enhanced Testing Suite</h1>
            <p>Comprehensive testing for ARIA patterns, impact levels, and axe-core v4.10 features.</p>
        </header>

        <nav role="navigation" aria-label="Main Navigation">
            <ul>
                <li><a href="#landmarks">Landmarks</a></li>
                <li><a href="#interactive">Interactive Elements</a></li>
                <li><a href="#forms">Forms</a></li>
                <li><a href="#problems">Problem Cases</a></li>
            </ul>
        </nav>

        <main role="main">
            <!-- Perfect ARIA Implementations -->
            <section id="landmarks" class="section">
                <h2>ARIA Landmarks & Regions</h2>
                
                <div role="region" aria-labelledby="search-heading">
                    <h3 id="search-heading">Search Region</h3>
                    <form role="search" aria-label="Site Search">
                        <label for="search-input">Search:</label>
                        <input type="search" id="search-input" aria-describedby="search-help">
                        <div id="search-help" class="sr-only">Enter keywords to search the site</div>
                        <button type="submit">Search</button>
                    </form>
                </div>
                
                <div role="complementary" aria-labelledby="sidebar-heading">
                    <h3 id="sidebar-heading">Related Information</h3>
                    <p>This complementary content provides additional context.</p>
                </div>
            </section>

            <!-- Interactive ARIA Elements -->
            <section id="interactive" class="section">
                <h2>Interactive ARIA Elements</h2>
                
                <!-- Buttons with States -->
                <div class="aria-widget">
                    <h3>Toggle Buttons</h3>
                    <button class="button" role="button" aria-pressed="false" onclick="toggleButton(this)">
                        Toggle Me
                    </button>
                    <button class="button" role="button" aria-pressed="true" onclick="toggleButton(this)">
                        Already Pressed
                    </button>
                </div>
                
                <!-- Tab Panel -->
                <div class="aria-widget">
                    <h3>Tab Interface</h3>
                    <div role="tablist" aria-label="Content Tabs">
                        <button role="tab" aria-selected="true" aria-controls="tab1-panel" id="tab1" class="tab">
                            Tab 1
                        </button>
                        <button role="tab" aria-selected="false" aria-controls="tab2-panel" id="tab2" class="tab">
                            Tab 2
                        </button>
                        <button role="tab" aria-selected="false" aria-controls="tab3-panel" id="tab3" class="tab">
                            Tab 3
                        </button>
                    </div>
                    
                    <div role="tabpanel" id="tab1-panel" aria-labelledby="tab1" class="tab-panel active">
                        <h4>First Tab Content</h4>
                        <p>Content for the first tab with proper ARIA associations.</p>
                    </div>
                    
                    <div role="tabpanel" id="tab2-panel" aria-labelledby="tab2" class="tab-panel">
                        <h4>Second Tab Content</h4>
                        <p>Content for the second tab.</p>
                    </div>
                    
                    <div role="tabpanel" id="tab3-panel" aria-labelledby="tab3" class="tab-panel">
                        <h4>Third Tab Content</h4>
                        <p>Content for the third tab.</p>
                    </div>
                </div>
                
                <!-- Menu System -->
                <div class="aria-widget">
                    <h3>Menu System</h3>
                    <button aria-haspopup="true" aria-expanded="false" onclick="toggleMenu()">
                        Open Menu
                    </button>
                    <ul role="menu" id="dropdown-menu" style="display: none;" aria-labelledby="menu-button">
                        <li role="menuitem" class="menu-item" onclick="selectMenuItem(this)">Option 1</li>
                        <li role="menuitem" class="menu-item" onclick="selectMenuItem(this)">Option 2</li>
                        <li role="menuitem" class="menu-item" onclick="selectMenuItem(this)">Option 3</li>
                        <li role="separator" style="border-top: 1px solid #ccc; margin: 5px 0;"></li>
                        <li role="menuitem" class="menu-item" onclick="selectMenuItem(this)">Other Option</li>
                    </ul>
                </div>
                
                <!-- Progress Indicators -->
                <div class="aria-widget">
                    <h3>Progress Indicators</h3>
                    <div role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" 
                         aria-labelledby="progress-label" class="progress-container">
                        <div id="progress-label" class="sr-only">Upload Progress: 75%</div>
                        <div class="progress-bar" style="width: 75%"></div>
                    </div>
                    
                    <button onclick="updateProgress()">Update Progress</button>
                </div>
            </section>

            <!-- Form Elements with ARIA -->
            <section id="forms" class="section">
                <h2>Form Elements with ARIA Enhancement</h2>
                
                <form novalidate aria-labelledby="form-heading">
                    <h3 id="form-heading">Enhanced Form</h3>
                    
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" 
                               aria-required="true" 
                               aria-describedby="username-help username-error"
                               aria-invalid="false">
                        <div id="username-help">Must be at least 3 characters long</div>
                        <div id="username-error" role="alert" class="error" style="display: none;"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" 
                               aria-required="true"
                               aria-describedby="email-error"
                               aria-invalid="false">
                        <div id="email-error" role="alert" class="error" style="display: none;"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="bio">Biography:</label>
                        <textarea id="bio" name="bio" rows="4" 
                                  aria-multiline="true"
                                  aria-describedby="bio-help"
                                  maxlength="500"></textarea>
                        <div id="bio-help">Optional: Tell us about yourself (max 500 characters)</div>
                    </div>
                    
                    <div class="form-group">
                        <fieldset>
                            <legend>Notification Preferences</legend>
                            <div>
                                <input type="checkbox" id="email-notifications" name="notifications" value="email">
                                <label for="email-notifications">Email notifications</label>
                            </div>
                            <div>
                                <input type="checkbox" id="sms-notifications" name="notifications" value="sms">
                                <label for="sms-notifications">SMS notifications</label>
                            </div>
                        </fieldset>
                    </div>
                    
                    <div class="form-group">
                        <label for="country">Country:</label>
                        <select id="country" name="country" aria-required="true" aria-describedby="country-error">
                            <option value="">Select a country</option>
                            <option value="us">United States</option>
                            <option value="ca">Canada</option>
                            <option value="uk">United Kingdom</option>
                            <option value="de">Germany</option>
                            <option value="fr">France</option>
                        </select>
                        <div id="country-error" role="alert" class="error" style="display: none;"></div>
                    </div>
                    
                    <button type="submit">Submit Form</button>
                    <button type="button" onclick="validateForm()">Validate</button>
                </form>
            </section>

            <!-- Live Regions and Status -->
            <section class="section">
                <h2>Live Regions & Status Updates</h2>
                
                <div>
                    <button onclick="announceMessage('polite')">Announce Politely</button>
                    <button onclick="announceMessage('assertive')">Announce Assertively</button>
                    <button onclick="updateStatus()">Update Status</button>
                </div>
                
                <div aria-live="polite" id="polite-announcements" class="sr-only"></div>
                <div aria-live="assertive" id="assertive-announcements" class="sr-only"></div>
                
                <div role="status" id="status-updates" aria-live="polite">
                    Ready for interaction
                </div>
                
                <div role="log" id="activity-log" aria-live="polite" style="height: 100px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
                    <div>Application started</div>
                </div>
            </section>

            <!-- Problem Cases for Testing -->
            <section id="problems" class="section">
                <h2>Problem Cases (Should Fail Tests)</h2>
                <p><strong>Note:</strong> These elements contain intentional accessibility issues for testing purposes.</p>
                
                <!-- Invalid ARIA -->
                <div class="aria-widget">
                    <h3>Invalid ARIA Usage</h3>
                    
                    <!-- Invalid role -->
                    <div role="invalid-role">This has an invalid ARIA role</div>
                    
                    <!-- Missing referenced elements -->
                    <button aria-labelledby="nonexistent-id">Button with missing label reference</button>
                    <input aria-describedby="missing-description" placeholder="Input with missing description">
                    
                    <!-- Invalid ARIA values -->
                    <div role="button" aria-pressed="maybe">Button with invalid pressed value</div>
                    <input aria-required="yes" placeholder="Non-standard aria-required value">
                    <textarea aria-multiline="1" rows="3">Non-standard aria-multiline value</textarea>
                    
                    <!-- Missing required ARIA -->
                    <div role="progressbar">Progress without value attributes</div>
                    <button aria-haspopup="true">Button missing aria-expanded</button>
                </div>
                
                <!-- Descendant Labeling Issues -->
                <div class="aria-widget">
                    <h3>Descendant Labeling Tests</h3>
                    
                    <div aria-label="Parent with label">
                        <span aria-label="Child with label">Nested labeled content</span>
                    </div>
                    
                    <div aria-labelledby="parent-label">
                        <h4 id="parent-label">Parent Label</h4>
                        <div aria-labelledby="child-label">
                            <span id="child-label">Child Label</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <aside role="complementary">
            <h2>Testing Notes</h2>
            <ul>
                <li>This page tests various ARIA patterns and common issues</li>
                <li>Impact levels range from minor to critical</li>
                <li>Modern ARIA features (ARIA 1.2) are included</li>
                <li>Permissive handling test cases included</li>
            </ul>
        </aside>

        <footer role="contentinfo">
            <p>&copy; 2024 ARIA Enhanced Testing. For accessibility testing purposes.</p>
        </footer>
    </div>

    <script>
        function toggleButton(button) {
            const pressed = button.getAttribute('aria-pressed') === 'true';
            button.setAttribute('aria-pressed', !pressed);
        }
        
        function toggleMenu() {
            const button = event.target;
            const menu = document.getElementById('dropdown-menu');
            const expanded = button.getAttribute('aria-expanded') === 'true';
            
            button.setAttribute('aria-expanded', !expanded);
            menu.style.display = expanded ? 'none' : 'block';
        }
        
        function selectMenuItem(item) {
            // Remove previous selection
            document.querySelectorAll('.menu-item').forEach(mi => mi.removeAttribute('aria-selected'));
            // Set new selection
            item.setAttribute('aria-selected', 'true');
            
            // Close menu
            document.getElementById('dropdown-menu').style.display = 'none';
            document.querySelector('[aria-haspopup="true"]').setAttribute('aria-expanded', 'false');
            
            logActivity(`Selected: ${item.textContent}`);
        }
        
        function updateProgress() {
            const progress = document.querySelector('[role="progressbar"]');
            const current = parseInt(progress.getAttribute('aria-valuenow'));
            const newValue = Math.min(current + 10, 100);
            
            progress.setAttribute('aria-valuenow', newValue);
            progress.querySelector('.progress-bar').style.width = newValue + '%';
            progress.querySelector('.sr-only').textContent = `Upload Progress: ${newValue}%`;
        }
        
        function announceMessage(priority) {
            const message = `This is a ${priority} announcement at ${new Date().toLocaleTimeString()}`;
            const container = document.getElementById(`${priority}-announcements`);
            container.textContent = message;
            
            // Clear after 5 seconds
            setTimeout(() => container.textContent = '', 5000);
        }
        
        function updateStatus() {
            const status = document.getElementById('status-updates');
            const messages = [
                'Processing...',
                'Almost complete...',
                'Operation successful',
                'Ready for next action'
            ];
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            status.textContent = randomMessage;
        }
        
        function logActivity(message) {
            const log = document.getElementById('activity-log');
            const entry = document.createElement('div');
            entry.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }
        
        function validateForm() {
            const form = document.querySelector('form');
            let isValid = true;
            
            // Reset all errors
            form.querySelectorAll('.error').forEach(error => {
                error.style.display = 'none';
                error.textContent = '';
            });
            
            form.querySelectorAll('input, select, textarea').forEach(field => {
                field.setAttribute('aria-invalid', 'false');
            });
            
            // Username validation
            const username = document.getElementById('username');
            if (username.value.length < 3) {
                showError('username-error', 'Username must be at least 3 characters');
                username.setAttribute('aria-invalid', 'true');
                isValid = false;
            }
            
            // Email validation
            const email = document.getElementById('email');
            if (!email.value.includes('@')) {
                showError('email-error', 'Please enter a valid email address');
                email.setAttribute('aria-invalid', 'true');
                isValid = false;
            }
            
            // Country validation
            const country = document.getElementById('country');
            if (!country.value) {
                showError('country-error', 'Please select a country');
                country.setAttribute('aria-invalid', 'true');
                isValid = false;
            }
            
            const message = isValid ? 'Form validation passed' : 'Form has validation errors';
            updateStatus();
            logActivity(message);
        }
        
        function showError(errorId, message) {
            const errorElement = document.getElementById(errorId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            logActivity('ARIA Enhanced test page loaded');
            
            // Set up tab functionality
            document.querySelectorAll('[role="tab"]').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active from all tabs and panels
                    document.querySelectorAll('[role="tab"]').forEach(t => t.setAttribute('aria-selected', 'false'));
                    document.querySelectorAll('[role="tabpanel"]').forEach(p => p.classList.remove('active'));
                    
                    // Activate clicked tab and its panel
                    this.setAttribute('aria-selected', 'true');
                    const panelId = this.getAttribute('aria-controls');
                    document.getElementById(panelId).classList.add('active');
                    
                    logActivity(`Switched to ${this.textContent}`);
                });
            });
        });
    </script>
</body>
</html>
